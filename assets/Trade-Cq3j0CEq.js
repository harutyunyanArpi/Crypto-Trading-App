import{j as o,r as u,d as i,t as _,B as F,c as j,e as N}from"./index-BPj7JYFc.js";import{u as A,Q as I,g as T}from"./cryptoService-DaINKK1r.js";function P(e,t){return A(e,I)}const q={vs_currency:"usd",order:"market_cap_desc",per_page:100,page:1,sparkline:!1};function E(e){const t={...q,...e},r=P({queryKey:["crypto-assets","all"],queryFn:async()=>({pages:[await T(t)]})});return{data:r.data,isLoading:r.isLoading,isFetchingNextPage:!1,hasNextPage:!1,fetchNextPage:()=>{},isError:r.isError,error:r.error}}function C(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(r=C(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function b(){for(var e,t,r=0,s="",c=arguments.length;r<c;r++)(e=arguments[r])&&(t=C(e))&&(s&&(s+=" "),s+=t);return s}const w="_cryptoSelect_cvl4z_1",M={cryptoSelect:w},W=({className:e,children:t,...r})=>o.jsx("select",{...r,className:`${M.cryptoSelect} ${e||""}`,children:t}),$="_cryptoInput_1u4f1_1",B={cryptoInput:$},x=({className:e="",...t})=>o.jsx("input",{className:`${B.cryptoInput} ${e}`,...t}),Q="_container_qinsu_1",R="_card_qinsu_7",k="_fieldsWrapper_qinsu_18",D="_column_qinsu_31",L="_reverseColumn_qinsu_35",l={container:Q,card:R,fieldsWrapper:k,column:D,reverseColumn:L};function O(e){var v;const t=(e==null?void 0:e.pages.flat())??[],[r,s]=u.useState(((v=t==null?void 0:t[0])==null?void 0:v.id)??""),[c,h]=u.useState(i.CryptoToFiat),[d,m]=u.useState(""),[y,g]=u.useState(""),p=u.useMemo(()=>t==null?void 0:t.find(n=>n.id===r),[r,t]);u.useEffect(()=>{const n=(p==null?void 0:p.current_price)??0;if(n)if(c===i.CryptoToFiat){const a=parseFloat(d);g(isNaN(a)?"":(a*n).toFixed(2))}else{const a=parseFloat(y);m(isNaN(a)?"":(a/n).toFixed(6))}},[d,y,c,p]);const S=o.jsx(W,{value:r,onChange:n=>s(n.target.value),children:t.map(n=>o.jsx("option",{value:n.id,children:n.name},n.id))});return o.jsx("div",{className:l.container,children:o.jsxs("div",{className:b(l.card,{[l.column]:c===i.CryptoToFiat,[l.reverseColumn]:c!==i.CryptoToFiat}),children:[o.jsxs("div",{className:l.fieldsWrapper,children:[o.jsx(x,{type:"number",min:"0",value:d,readOnly:c!==i.CryptoToFiat,onChange:n=>{const a=n.target.value,f=parseFloat(a);a===""||f>=0?m(a):_.warning("Please enter a positive value.")},placeholder:"Crypto Amount"}),S]}),o.jsx("div",{className:l.fieldsWrapper,children:o.jsx(F,{variant:j.PRIMARY,onClick:()=>h(n=>n===i.CryptoToFiat?i.FiatToCrypto:i.CryptoToFiat),children:"â†• Swap"})}),o.jsxs("div",{className:l.fieldsWrapper,children:[o.jsx(x,{type:"number",min:"0",readOnly:c===i.CryptoToFiat,value:y,onChange:n=>{const a=n.target.value,f=parseFloat(a);a===""||f>=0?g(a):_.warning("Please enter a positive value.")},placeholder:"USD Amount"}),o.jsx("span",{children:"USD"})]})]})})}function z(){var t;const{data:e}=E();return u.useEffect(()=>{const{isSessionExpired:r,logout:s}=N.getState();r()&&(s(),alert("Your session has expired. Please log in to continue."))},[]),o.jsx(O,{pages:((t=e==null?void 0:e.pages)==null?void 0:t.flat())??[]})}export{z as default};
