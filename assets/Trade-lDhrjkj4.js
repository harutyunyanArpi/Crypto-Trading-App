import{j as o,r as l,d as i,t as v,B as S,c as F,e as j}from"./index-D9oQtm-y.js";import{u as N,Q as A,g as I}from"./cryptoService-D5HKnaUN.js";function T(e,t){return N(e,A)}const P={vs_currency:"usd",order:"market_cap_desc",per_page:100,page:1,sparkline:!1};function q(e){const t={...P,...e},s=T({queryKey:["crypto-assets","all"],queryFn:async()=>({pages:[await I(t)]})});return{data:s.data,isLoading:s.isLoading,isFetchingNextPage:!1,hasNextPage:!1,fetchNextPage:()=>{},isError:s.isError,error:s.error}}function x(e){var t,s,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(s=x(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function E(){for(var e,t,s=0,r="",c=arguments.length;s<c;s++)(e=arguments[s])&&(t=x(e))&&(r&&(r+=" "),r+=t);return r}const b="_cryptoSelect_cvl4z_1",w={cryptoSelect:b},M=({className:e,children:t,...s})=>o.jsx("select",{...s,className:`${w.cryptoSelect} ${e||""}`,children:t}),W="_cryptoInput_1u4f1_1",$={cryptoInput:W},_=({className:e="",...t})=>o.jsx("input",{className:`${$.cryptoInput} ${e}`,...t}),B="_container_qinsu_1",Q="_card_qinsu_7",R="_fieldsWrapper_qinsu_18",k="_column_qinsu_31",D="_reverseColumn_qinsu_35",u={container:B,card:Q,fieldsWrapper:R,column:k,reverseColumn:D};function L(e){const t=(e==null?void 0:e.pages.flat())??[],[s,r]=l.useState(""),[c,C]=l.useState(i.CryptoToFiat),[d,m]=l.useState(""),[y,g]=l.useState(""),p=l.useMemo(()=>t==null?void 0:t.find(n=>n.id===s),[s,t]);l.useEffect(()=>{t.length>0&&!s&&r(t[0].id)},[t,s]),l.useEffect(()=>{const n=(p==null?void 0:p.current_price)??0;if(n)if(c===i.CryptoToFiat){const a=parseFloat(d);g(isNaN(a)?"":(a*n).toFixed(2))}else{const a=parseFloat(y);m(isNaN(a)?"":(a/n).toFixed(6))}},[d,y,c,p]);const h=o.jsx(M,{value:s,onChange:n=>r(n.target.value),children:t.map(n=>o.jsx("option",{value:n.id,children:n.name},n.id))});return o.jsx("div",{className:u.container,children:o.jsxs("div",{className:E(u.card,{[u.column]:c===i.CryptoToFiat,[u.reverseColumn]:c!==i.CryptoToFiat}),children:[o.jsxs("div",{className:u.fieldsWrapper,children:[o.jsx(_,{type:"number",min:"0",value:d,readOnly:c!==i.CryptoToFiat,onChange:n=>{const a=n.target.value,f=parseFloat(a);a===""||f>=0?m(a):v.warning("Please enter a positive value.")},placeholder:"Crypto Amount"}),h]}),o.jsx("div",{className:u.fieldsWrapper,children:o.jsx(S,{variant:F.PRIMARY,onClick:()=>C(n=>n===i.CryptoToFiat?i.FiatToCrypto:i.CryptoToFiat),children:"â†• Swap"})}),o.jsxs("div",{className:u.fieldsWrapper,children:[o.jsx(_,{type:"number",min:"0",readOnly:c===i.CryptoToFiat,value:y,onChange:n=>{const a=n.target.value,f=parseFloat(a);a===""||f>=0?g(a):v.warning("Please enter a positive value.")},placeholder:"USD Amount"}),o.jsx("span",{children:"USD"})]})]})})}function Y(){var t;const{data:e}=q();return l.useEffect(()=>{const{isSessionExpired:s,logout:r}=j.getState();s()&&(r(),alert("Your session has expired. Please log in to continue."))},[]),o.jsx(L,{pages:((t=e==null?void 0:e.pages)==null?void 0:t.flat())??[]})}export{Y as default};
